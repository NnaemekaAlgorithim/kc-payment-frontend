import{u as x,m as u,j as e,L as p,t as i}from"./index-3nGxJqN5.js";import{R as g,F as t}from"./react-final-form.es-UR2w0oaO.js";import{d as h,c as f,o as b,s as o}from"./useAuth-EI423n2W.js";import{v as w}from"./reset-CDHS9hRq.js";import{B as j}from"./Button-CGGwva3R.js";import"./extends-CF3RwP-h.js";import"./axiosinstance-CetVC_8N.js";import"./js.cookie-Cz0CWeBA.js";import"./clsx-B-dksMZM.js";const y=b({email:o().email("Enter a valid email"),otp:o().min(4,"OTP must be at least 4 digits"),new_password:o().min(6,"Password must be at least 6 characters"),confirm_password:o().min(6,"Confirm your password")}).refine(a=>a.new_password===a.confirm_password,{path:["confirm_password"],message:"Passwords do not match"});function O(){const a=x(),n=h(),d=u().state?.email||"",c=async l=>{n.mutate(l,{onSuccess:r=>{i.success(r?.message||"Password successfully!"),a("/login")},onError:r=>{console.error("Login failed:",r);const s=r?.response?.data,m=s?.response_data?.errors?.email?.[0]||s?.response_data?.message||"Login failed. Please try again.";i.error(m)}})};return e.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[e.jsx("div",{className:"hidden lg:flex w-1/2 bg-blue-100 items-center justify-center",children:e.jsx("img",{src:w,alt:"Reset password illustration",className:"max-w-md"})}),e.jsx("div",{className:"flex w-full lg:w-1/2 items-center justify-center px-6",children:e.jsxs("div",{className:"w-full max-w-md bg-white rounded-2xl shadow-lg p-8 relative",children:[e.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-sm text-gray-500 text-center mb-6",children:"Enter the OTP we sent to your email, then choose a new password."}),e.jsx(g,{onSubmit:c,validate:f(y),render:({handleSubmit:l})=>e.jsxs("form",{onSubmit:l,className:"space-y-5",children:[e.jsx(t,{name:"email",initialValue:d,children:({input:r,meta:s})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{...r,type:"email",disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 bg-gray-100"}),s.touched&&s.error&&e.jsx("span",{className:"text-red-500 text-xs",children:s.error})]})}),e.jsx(t,{name:"otp",children:({input:r,meta:s})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"OTP"}),e.jsx("input",{...r,type:"text",maxLength:6,placeholder:"Enter 6-digit OTP",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),s.touched&&s.error&&e.jsx("span",{className:"text-red-500 text-xs",children:s.error})]})}),e.jsx(t,{name:"new_password",children:({input:r,meta:s})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),e.jsx("input",{...r,type:"password",placeholder:"********",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),s.touched&&s.error&&e.jsx("span",{className:"text-red-500 text-xs",children:s.error})]})}),e.jsx(t,{name:"confirm_password",children:({input:r,meta:s})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),e.jsx("input",{...r,type:"password",placeholder:"********",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),s.touched&&s.error&&e.jsx("span",{className:"text-red-500 text-xs",children:s.error})]})}),e.jsx(j,{type:"submit",className:"w-full",loading:n.isPending,loadingText:"Resetting...",children:"Reset Password"})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Back to"," ",e.jsx(p,{to:"/login",className:"text-blue-600 hover:underline font-medium",children:"Login"})]})})]})})]})}export{O as default};
